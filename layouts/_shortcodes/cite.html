{{- $type := .Get "type" -}}

{{- if eq $type "new" -}}
  {{- $url := .Get "url" -}}
  {{- $text := .Get "text" -}}

  {{- if or $url $text -}}
    {{- $pageCiteCount := .Page.Store.Get "pageCiteCount" | default 0 -}}
    {{- $pageCiteSlice := .Page.Store.Get "pageCiteSlice" | default slice -}}

    {{- $siteCiteCount := .Site.Store.Get "siteCiteCount" | default 0 -}}
    {{- $siteCiteSlice := .Page.Store.Get "siteCiteSlice" | default slice -}}

    
  {{- else -}}
    {{- errorf "Citation needs url or text attribute" -}}
  {{- end -}}
{{- else if eq $type "existing" -}}

{{- else -}}
  {{- errorf "Invalid citation type attribute '%s'" $type -}}
{{- end -}}